"use strict";(self["webpackChunkrasandbox"]=self["webpackChunkrasandbox"]||[]).push([[388],{388:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"better-steam",class:t.themeClass},[t.showFilter?e("filter-modal",{on:{close:function(e){t.showFilter=!1},submit:t.updateFilter,clearFilter:t.clearFilter}}):t._e(),e("div",{staticClass:"main-header"},[e("h1",{staticClass:"main-title"},[t._v("Sandbox Project")]),e("button",{staticClass:"better-steam-button--user",on:{click:t.goToProfile}},[e("i",{staticClass:"fa-regular fa-user fa-2x"})])]),e("button",{staticClass:"better-steam-button--theme",on:{click:t.toggleDarkmode}},[e("i",{staticClass:"fa-solid fa-2xl",class:t.darkOrLightClass})]),e("div",{staticClass:"search-with-filters is-rounded"},[e("div",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Search any Game"},domProps:{value:t.filter.name},on:{input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}}),t._m(0)]),e("button",{staticClass:"button",on:{click:function(e){t.showFilter=!0}}},[t._m(1),e("span",[t._v("Filter")])])]),e("div",{staticClass:"items-per-page"},[t._v(" show "),e("div",{staticClass:"select-container"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.pageSize,expression:"filter.pageSize"}],staticClass:"selecter",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"pageSize",e.target.multiple?i:i[0])}}},[e("option",{attrs:{value:"20"}},[t._v("20 items")]),e("option",{attrs:{value:"40"}},[t._v("40 items")]),e("option",{attrs:{value:"60"}},[t._v("60 items")])])]),t._v(" items per page ")]),e("div",{staticClass:"field is-grouped"},[e("button",{staticClass:"button",attrs:{disabled:1==t.filter.page},on:{click:t.prevPage}},[t._m(2)]),e("button",{staticClass:"button is-static"},[t._v(" "+t._s(t.filter?.page)+" ")]),e("button",{staticClass:"button"},[e("span",[e("i",{staticClass:"fa-solid fa-arrow-right",on:{click:t.nextPage}})])])]),e("div",[t._v("found "+t._s(t.totalGamesCount)+" Games")]),t.isGamesLoading?e("i",{staticClass:"fa-solid fa-spinner fa-4x loading-spinner"}):t._e(),t.isGamesLoading?t._e():e("div",{staticClass:"columns is-gapless is-multiline"},t._l(t.gamesList,(function(i){return e("div",{key:i.id,staticClass:"column is-one-quarter"},[e("game-box",{attrs:{Game:i},on:{addFavourite:t.addFavourite,removeFavourite:t.removeFavourite,addWishlist:t.addWishlist,removeWishlist:t.removeWishlist}})],1)})),0),t.showUpButton?e("button",{staticClass:"up-button",on:{click:t.scrollToTop}},[e("i",{staticClass:"fa-solid fa-arrow-up"})]):t._e()],1)},a=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span",{staticClass:"icon is-small is-right"},[e("i",{staticClass:"fa-solid fa-magnifying-glass"})])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa-solid fa-filter"})])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span",[e("i",{staticClass:"fa-solid fa-arrow-left"})])}],r=i(556),n=i(936),o=i(381),l=i(382),c=new n.N(o.od),u=o.w3.extend({name:"Main",components:{FilterModal:o.Dd,GameBox:o.MQ},data:function(){return{showFilter:!1,totalGamesCount:0,showUpButton:!1,gamesList:[],filter:{page:1,name:"",company:"",genre:"",minPrice:0,maxPrice:100,releaseDate:"",pageSize:20},isFavorited:!1,isGamesLoading:!1}},methods:{updateFilter:function(t){this.filter=(0,r.pi)((0,r.pi)({},this.filter),t),this.updateRoute()},isInPricerange:function(t){return!this.filter||t>=this.filter.minPrice&&t<=this.filter.maxPrice},isInGenre:function(t){return!this.filter||t.includes(this.filter.genre)},getGames:function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,c.getGames(this.filter)];case 1:return t=e.sent(),this.gamesList=t.games,this.totalGamesCount=t.totalCount,[2]}}))}))},nextPage:function(){this.filter.page++,this.updateRoute()},prevPage:function(){this.filter.page--,this.updateRoute()},updateRoute:function(){var t={};0!==this.filter.page&&(t.page=this.filter.page),""!==this.filter.genre&&(t.genre=this.filter.genre),""!==this.filter.name&&(t.name=this.filter.name),""!==this.filter.company&&(t.company=this.filter.company),0!==this.filter.minPrice&&(t.minPrice=this.filter.minPrice),100!==this.filter.maxPrice&&(t.maxPrice=this.filter.maxPrice),""!==this.filter.releaseDate&&(t.releaseDate=this.filter.releaseDate);var e=this.$route.query,i=Object.keys(t).some((function(i){return t[i]!==e[i]}));i&&this.$router.push({path:"/games",query:t})},clearFilter:function(){var t={page:1,name:"",company:"",genre:"",minPrice:0,maxPrice:100,releaseDate:"",pageSize:20};this.filter=(0,r.pi)({},t)},checkScroll:function(){this.showUpButton=window.scrollY>300},scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})},goToProfile:function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return t=o.LJ.get("token"),void 0===t&&this.$router.push("/login"),[4,c.verify(t)];case 1:return e=i.sent(),e.isValid?this.$router.push("/user"):this.$router.push("/login"),[2]}}))}))},toggleDarkmode:function(){switch(this.$store.getters.getTheme){case o.b3.light:this.$store.dispatch("setTheme",o.b3.dark);break;case o.b3.dark:this.$store.dispatch("setTheme",o.b3.light);break;case o.b3.red:break;default:this.$store.dispatch("setTheme",o.b3.light)}},addFavourite:function(t,e){c.addFavoriteGame(e,t.toString())},removeFavourite:function(t,e){c.removeFavouriteGame(e,t.toString())},addWishlist:function(t,e){c.addToWishlist(e,t.toString())},removeWishlist:function(t,e){c.removeFromWishlist(e,t.toString())},getWishlist:function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return t=o.LJ.get("token"),void 0===t?[3,2]:[4,c.getWishlist(t)];case 1:e=i.sent(),console.log(e),i.label=2;case 2:return[2]}}))}))}},computed:(0,r.pi)((0,r.pi)({},(0,l.rn)(["theme","wishlist"])),{themeClass:function(){return this.$store.getters.getTheme},darkOrLightClass:function(){return"dark-theme"===this.$store.getters.getTheme?"fa-sun":"fa-moon"}}),watch:{filter:{deep:!0,immediate:!0,handler:function(){this.getGames()}}},created:function(){this.filter.page=Number(this.$route.query.page||1),this.filter.company=String(this.$route.query.company||""),this.filter.genre=String(this.$route.query.genre||""),this.filter.name=String(this.$route.query.name||""),this.filter.releaseDate=String(this.$route.query.releaseDate||""),this.filter.minPrice=Number(this.$route.query.minPrice||0),this.filter.maxPrice=Number(this.$route.query.maxPrice||100),this.$store.dispatch("fetchWishlist")},mounted:function(){window.addEventListener("scroll",this.checkScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.checkScroll)}}),h=u,f=i(917),m=(0,f.Z)(h,s,a,!1,null,null,null),d=m.exports}}]);
//# sourceMappingURL=388.3d886568.js.map